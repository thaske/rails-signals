<div class="posts-feed">
  <h1>Posts Feed</h1>

  <% if @posts.any? %>
    <% @posts.each do |post| %>
      <article class="post">
        <header class="post-header">
          <h2 class="post-title"><%= link_to post.title, post_path(post) %></h2>
          <div class="post-meta">
            <span class="post-author">by <%= post.user.name %></span>
            <span class="post-date"><%= post.created_at.strftime("%B %d, %Y at %I:%M %p") %></span>
          </div>
        </header>

        <div class="post-content">
          <%= simple_format(post.content) %>
        </div>

        <footer class="post-footer">
          <div class="comments-section">
            <h3>Comments (<%= post.comments.count %>)</h3>

            <% if post.comments.any? %>
              <div class="comments-list">
                <% post.comments.order(:created_at).each do |comment| %>
                  <div class="comment">
                    <div class="comment-header">
                      <span class="comment-author"><%= comment.user.name %></span>
                      <span class="comment-date"><%= comment.created_at.strftime("%B %d, %Y at %I:%M %p") %></span>
                    </div>
                    <div class="comment-content">
                      <%= simple_format(comment.content) %>
                    </div>
                  </div>
                <% end %>
              </div>
            <% else %>
              <p class="no-comments">No comments yet.</p>
            <% end %>
          </div>
        </footer>
      </article>
    <% end %>

    <div class="pagination-wrapper">
      <%= paginate @posts %>
    </div>
  <% else %>
    <div class="no-posts">
      <p>No posts available yet.</p>
    </div>
  <% end %>
</div>
